// scripts.js
function addBoard() {
  const boardName = document.getElementById("boardName").value;
  // Implement logic to send a request to your Django server to add a new board
  console.log("Adding Board:", boardName);
}

function addTopic() {
  const topicSubject = document.getElementById("topicSubject").value;
  const boardId = document.getElementById("boardSelect").value;
  // Implement logic to send a request to your Django server to add a new topic
  console.log("Adding Topic:", topicSubject, "to Board ID:", boardId);
}

function addPost() {
  const postMessage = document.getElementById("postMessage").value;
  const topicId = document.getElementById("topicSelect").value;
  // Implement logic to send a request to your Django server to add a new post
  console.log("Adding Post:", postMessage, "to Topic ID:", topicId);
}

// scripts.js
document.addEventListener("DOMContentLoaded", function () {
  // Assuming you have CSRF token setup in your Django project
  const csrftoken = document.querySelector("[name=csrfmiddlewaretoken]").value;

  function sendRequest(url, method, data, successCallback, errorCallback) {
    const xhr = new XMLHttpRequest();
    xhr.open(method, url, true);
    xhr.setRequestHeader("Content-Type", "application/json");
    xhr.setRequestHeader("X-CSRFToken", csrftoken);

    xhr.onload = function () {
      if (xhr.status === 200) {
        successCallback(xhr.responseText);
      } else {
        errorCallback(xhr.responseText);
      }
    };

    xhr.onerror = function () {
      errorCallback("Network Error");
    };

    xhr.send(data);
  }

  function addBoard() {
    const boardName = document.getElementById("boardName").value;
    const data = JSON.stringify({ name: boardName });

    sendRequest(
      "/add_board/",
      "POST",
      data,
      function (response) {
        console.log("Board added successfully:", response);
        // You can update the UI or perform additional actions as needed
      },
      function (error) {
        console.error("Error adding board:", error);
      }
    );
  }

  function addTopic() {
    const topicSubject = document.getElementById("topicSubject").value;
    const boardId = document.getElementById("boardSelect").value;
    const data = JSON.stringify({ subject: topicSubject, board_id: boardId });

    sendRequest(
      "/add_topic/",
      "POST",
      data,
      function (response) {
        console.log("Topic added successfully:", response);
        // You can update the UI or perform additional actions as needed
      },
      function (error) {
        console.error("Error adding topic:", error);
      }
    );
  }

  function addPost() {
    const postMessage = document.getElementById("postMessage").value;
    const topicId = document.getElementById("topicSelect").value;
    const data = JSON.stringify({ message: postMessage, topic_id: topicId });

    sendRequest(
      "/add_post/",
      "POST",
      data,
      function (response) {
        console.log("Post added successfully:", response);
        // You can update the UI or perform additional actions as needed
      },
      function (error) {
        console.error("Error adding post:", error);
      }
    );
  }

  document.getElementById("addBoardBtn").addEventListener("click", addBoard);
  document.getElementById("addTopicBtn").addEventListener("click", addTopic);
  document.getElementById("addPostBtn").addEventListener("click", addPost);
});
